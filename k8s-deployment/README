######################## Before to do that make sure you're ready for ########################
- build docker image and push to your Docker Hub
- you have Docker Desktop and enable Kubernetes Cluster in your Docker Desktop
##############################################################################################

1.kubectl apply deployment and service
- kubectl apply -f deployment.yaml
- kubectl apply -f service.yaml
- kubectl get deployments # list deployment
- kubectl get services # list service

+ scale deployment
- kubectl scale deployment notification-deployment --replicas=5 # scale to 5 pods

2.kubectl apply ingress
- kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/main/deploy/static/provider/cloud/deploy.yaml
- kubectl apply -f ingress.yaml
- Open Notepad as Administrator → Click File → Open → C:\Windows\System32\drivers\etc → edit hosts file → 127.0.0.1 dev.sambathreasmey.local → save (if it cached try in cmd "ipconfig /flushdns")

3.testing
- http://dev.sambathreasmey.com/api/notification


4.apply configMap
- kubectl apply -f configMap.yaml
- kubectl describe configMap notification-config # verify configMap
- add mount into deployment
  spec:
      containers:
        - name: notification
          image: sambathreasmey/notification:1.0 # pull image from docker hub repository
          ports:
            - containerPort: 8080
          volumeMounts:
            - name: notification-config
              mountPath: /app/config
              readOnly: true
      volumes:
        - name: notification-config
          configMap:
            name: notification-config
- kubectl rollout restart deployment notification-deployment ( to restart deployment )

+ apply Reloader
- kubectl apply -f https://raw.githubusercontent.com/stakater/Reloader/master/deployments/kubernetes/reloader.yaml
- add annotation into deployment
  metadata:
  annotations:
    reloader.stakater.com/auto: "true" # Watches all referenced ConfigMaps

5.delete resources
- kubectl delete deployment notification-deployment
- kubectl delete service notification-service
- kubectl delete configmap notification-config
- kubectl delete ingress notification-ingress